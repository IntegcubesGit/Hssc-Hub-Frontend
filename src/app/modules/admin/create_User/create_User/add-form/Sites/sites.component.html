<div>
    <div class="body">
        <mat-form-field class="w-full">
            <mat-select [formControl]="roles" multiple>
                <mat-select-trigger>
                    <mat-chip-grid #chipGrid aria-label="Enter fruits">
                        @for (role of roles.value; track role) {
                            <mat-chip-row (removed)="remove(role)">
                                {{ role.name }}
                                <button matChipRemove>
                                    <mat-icon>cancel</mat-icon>
                                </button>
                            </mat-chip-row>
                        }
                    </mat-chip-grid>
                </mat-select-trigger>
                @for (role of rolesList; track role) {
                    <mat-option [value]="role">{{ role.name }}</mat-option>
                }
            </mat-select>
        </mat-form-field>
        <br />
        <br />
    </div>
</div>

<!-- Divider -->
<div class="mb-10 mt-11 border-t"></div>
<!--  Sites Checkboxes -->
<strong>Sites Access</strong>
<div class="checkbox-container">
    @if (sites.length > 0) {
        <div class="site-checkbox-grid">
            <div>
                <mat-checkbox
                    class="mb-2 mt-4 pt-1"
                    [color]="'primary'"
                    [(ngModel)]="selectAll"
                    (change)="toggleAllSites($event)"
                >
                    Select All
                </mat-checkbox>
            </div>
            @for (site of sites; track trackBySiteId; let idx = $index) {
                <mat-checkbox
                    class="mb-2 mt-4 w-40 pt-1"
                    [color]="'primary'"
                    [checked]="selectSingle.includes(site.siteId)"
                    (change)="onCheckboxChange($event, site.siteId)"
                >
                    {{ site.title }}
                </mat-checkbox>
            }
        </div>
    }
</div>
<!-- Divider -->
<div class="mb-10 mt-11 border-t"></div>

<!-- Actions -->
<div class="flex items-center justify-end">
    <button mat-stroked-button type="button" (click)="navigateUserBack()">
        Back
    </button>
    <button
        class="ml-4"
        mat-flat-button
        type="button"
        [color]="'primary'"
        (click)="saveUserSiteInfo()"
    >
        Save
    </button>
</div>
